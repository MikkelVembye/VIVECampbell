<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Samle mange ris-filer til en (eller flere) fil(er) i R • VIVECampbell</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Samle mange ris-filer til en (eller flere) fil(er) i R">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">VIVECampbell</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/VIVECampbell.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>VIVE specific content</h6></li>
    <li><a class="dropdown-item" href="../articles/Github.html">Forbind GitHub og RStudio plus adgang til Adobe Pro</a></li>
    <li><a class="dropdown-item" href="../articles/meta-analysis-in-R.html">Kom godt i gang med metaanalyse i R</a></li>
    <li><a class="dropdown-item" href="../articles/openai.html">VIVECampbell OpenAI konto</a></li>
    <li><a class="dropdown-item" href="../articles/samle-flere-ris-filer.html">Samle mange ris-filer til en (eller flere) fil(er) i R</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>EPPI tips and manuals</h6></li>
    <li><a class="dropdown-item" href="../articles/eppi-tips.html">Tips og tricks til EPPI</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Effect size calculation</h6></li>
    <li><a class="dropdown-item" href="../articles/Entering-data.html">Indtastning af data, effektstørrelsesudregning og cluster bias justering, når der kun er clustering i en gruppe</a></li>
    <li><a class="dropdown-item" href="../articles/Pooling-subgroups.html">Pooling across (multiple) subgroups</a></li>
    <li><a class="dropdown-item" href="../articles/ancova-puzzler.html">An ANCOVA puzzler</a></li>
    <li><a class="dropdown-item" href="../articles/es-calc-uden-means-og-sds.html">Effektstørrelsesudregning uden means og SDs (med eksempler)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MikkelVembye/VIVECampbell/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Samle mange ris-filer til en (eller flere) fil(er) i R</h1>
                        <h4 data-toc-skip class="author">Mikkel H.
Vembye</h4>
            
            <h4 data-toc-skip class="date">2024-05-29</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MikkelVembye/VIVECampbell/blob/main/vignettes/articles/samle-flere-ris-filer.Rmd" class="external-link"><code>vignettes/articles/samle-flere-ris-filer.Rmd</code></a></small>
      <div class="d-none name"><code>samle-flere-ris-filer.Rmd</code></div>
    </div>

    
    
<div class="warning" style="margin-left:2em; margin-right:2em; margin-bottom:2em; margin-top:2em; padding:0.1em; background-color: #d7dbdd; border: solid #bdc3c7 3px">
<span>
<p style="margin-top:1em; text-align:center">
<b>Vigtig note</b>
</p>
<p style="margin:1em">
Hvis du ikke har en R-version lig med eller over 4.1.0, skal du være
opmærksom på, at de koder jeg viser i denne vignette ikke umiddelbart
virker, da jeg benytter R base pipen <code>|&gt;</code>. Hvis du ikke
ønsker at opdatere R, kan du bytte <code>|&gt;</code> ud med
<code>magrittr</code> pipen <code>%&gt;%</code>. Ydermere skal man for
at kunne køre <code>revtools</code>-pakken have installeret en R-version
lig med eller over 3.5.0. I min gennemgang skriver jeg pakkennavnet
(<code>pakkenavn::</code>) foran alle funktioner. Hvis man har indlæst
de givne pakker er dette ikke nødvendigt, men jeg gør dette, for at gøre
det tydeligt, hvorfra jeg præcist henter den givne funktion.
</p>
<p></p></span>
</div>
<p>Det hænder ofte af forskellige årsager, at vi oplever at vores
bibliometriske søgninger ender ud med en lang række ris-filer. Disse kan
være utroligt trættende at arbejde med, da det kræver meget “peg og
klik” for at kunen indlæse disse i <a href="https://eppi.ioe.ac.uk/EPPIReviewer-Web/home" class="external-link">EPPI-Reviewer</a>. I
denne vignette viser jeg derfor, hvordan man hurtigt kan samle store
mængder af ris-filer til en eller flere filer via R-pakken
<code>revtools</code>.</p>
<p><br> Jeg indlæser først de nødvendige pakker, der skal bruges til
at samle risfilerne.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#library(revtools) # Benyttes til at indlæse risfiler</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">synthesisr</span><span class="op">)</span> <span class="co"># Forbedre pakke til at indlæse risfiler</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span> <span class="co"># Benyttes til at kunne indlæse flere filer ad gangen</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span> <span class="co"># Benyttes til at sortere ens ris-filer korrekt</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span> </span></code></pre></div>
<p>Første skridt, ift. at indlæse mange (ris-)filer på engang, er at
skabe en string-variabel med alle navnene på alle de ris-filer, som man
ønsker at samle. Dette kan gøres som vist her nedenfor. I dette
toy-eksempel, ønsker vi at samle 5 ris-filer fra EMBASE.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Tjek arbejdssti</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ændre evt. arbejdssti via (om nødvendigt)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"Indsæt den ønskede arbejdssti"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Her skabes vector med alle navnene på de ris-filer, som ønskes indlæst</span></span>
<span><span class="va">embase_file_names</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"undermappe_til_arbejdssti_1/etc"</span>, pattern <span class="op">=</span> <span class="st">"EMBASE"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_order.html" class="external-link">str_sort</a></span><span class="op">(</span>numeric <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Her sorteres </span></span>
<span></span>
<span><span class="va">embase_file_names</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "EMBASE_1-200.ris"    "EMBASE_201-400.ris"  "EMBASE_401-600.ris" </span></span>
<span><span class="co">## [4] "EMBASE_601-800.ris"  "EMBASE_801-1000.ris"</span></span></code></pre>
<p>Vi ser nu alle filer i den givne mappe, hvor “EMBASE” indgår i
filnavnet. Det er vigtigt at tjekke, at <code><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files()</a></code>
kommandoen gør sit arbejde og henter navnene på ens ris-filer.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Man kan finde dokumentationen bag R-funktioner ved at
indsætte et ? foran den givne funktion, eksempelvis således
&lt;code&gt;?list.files()&lt;/code&gt;&lt;/p&gt;"><sup>1</sup></a> Hvis dette
step ikke virker, vil resten af de nedenstående koder heller ikke virke.
Hvis ens arbejdssti-mappe er den samme mappe, som den hvor man har alle
sine ris-filer ligende kan man blot omskrive ovenstående koder som
følger, hvor path-argumentet ignoreres.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">embase_file_names</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"EMBASE"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_order.html" class="external-link">str_sort</a></span><span class="op">(</span>numeric <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span></code></pre></div>
<p>Når man har skabt en string-variabel med alle navne på de ris-filer,
man ønsker samlet, kan man skabe et stort datasæt med alle referencer
fra de givne ris-filer via <code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr::map()</a></code> funktionen og
<code>read_bibliography()</code> funktionen fra <code>revtools</code>.
Den sidste funktion konverterer referencerne fra ris-filerne til et
datasæt i R. Om lidt vil vi omvendt benytte
<code>write_bibliography()</code> til at konvertere dette datasæt
tilbage til en eller flere ris-filer, alt efter behov.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ris_file_dat</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">embase_file_names</span>, <span class="op">~</span> <span class="op">{</span></span>
<span>    <span class="fu">synthesisr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/synthesisr/man/read_refs.html" class="external-link">read_refs</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"undermappe_til_arbejdssti_1/"</span>, <span class="va">.x</span><span class="op">)</span><span class="op">)</span> </span>
<span>  <span class="op">}</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/list_c.html" class="external-link">list_rbind</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># Benyttes til at samle listen med datasæts som skabes via map()</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">ris_file_dat</span><span class="op">)</span> <span class="co"># Få overblik og det samlede data</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 1,000</span></span>
<span><span class="co">## Columns: 35</span></span>
<span><span class="co">## $ database          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Embase Preprint"<span style="color: #949494;">, </span>"Embase Preprint"<span style="color: #949494;">, </span>"Embase Prepri…</span></span>
<span><span class="co">## $ source_type       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "JOUR"<span style="color: #949494;">, </span>"JOUR"<span style="color: #949494;">, </span>"JOUR"<span style="color: #949494;">, </span>"JOUR"<span style="color: #949494;">, </span>"JOUR"<span style="color: #949494;">, </span>"JOUR"<span style="color: #949494;">, </span>"JOU…</span></span>
<span><span class="co">## $ publication_type  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Preprint"<span style="color: #949494;">, </span>"Preprint"<span style="color: #949494;">, </span>"Preprint"<span style="color: #949494;">, </span>"Preprint"<span style="color: #949494;">, </span>"Pre…</span></span>
<span><span class="co">## $ language          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "English"<span style="color: #949494;">, </span>"English"<span style="color: #949494;">, </span>"English"<span style="color: #949494;">, </span>"English"<span style="color: #949494;">, </span>"English…</span></span>
<span><span class="co">## $ address           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "United States and V. Chidambaran, Department of Ane…</span></span>
<span><span class="co">## $ title             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Mixed Methods Family Centered Study of Pain Experie…</span></span>
<span><span class="co">## $ journal           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "medRxiv"<span style="color: #949494;">, </span>"bioRxiv"<span style="color: #949494;">, </span>"medRxiv"<span style="color: #949494;">, </span>"medRxiv"<span style="color: #949494;">, </span>"medRxiv…</span></span>
<span><span class="co">## $ keywords          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "adult and aged and avoidance behavior and caregiver…</span></span>
<span><span class="co">## $ doi               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "https://dx.doi.org/10.1101/2024.03.20.24304546"<span style="color: #949494;">, </span>"h…</span></span>
<span><span class="co">## $ accession_zr      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2031394640"<span style="color: #949494;">, </span>"2029577544"<span style="color: #949494;">, </span>"2028779392"<span style="color: #949494;">, </span>"202819456…</span></span>
<span><span class="co">## $ url               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "https://www.medrxiv.org/"<span style="color: #949494;">, </span>"https://www.biorxiv.org…</span></span>
<span><span class="co">## $ publisher         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "medRxiv"<span style="color: #949494;">, </span>"bioRxiv"<span style="color: #949494;">, </span>"medRxiv"<span style="color: #949494;">, </span>"medRxiv"<span style="color: #949494;">, </span>"medRxiv…</span></span>
<span><span class="co">## $ A1                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Kumar J. and Atkinson D. and Chima A. and McLaughli…</span></span>
<span><span class="co">## $ AO                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Chidambaran, Vidya; ORCID: https://orcid.org/0000-0…</span></span>
<span><span class="co">## $ L2                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "http://ovidsp.ovid.com/ovidweb.cgi?T=JS&amp;PAGE=refere…</span></span>
<span><span class="co">## $ M1                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "(Kumar, Atkinson, Chima, McLaughlin, Parikh, Chidam…</span></span>
<span><span class="co">## $ N2                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Background and Objectives: Although racial disparit…</span></span>
<span><span class="co">## $ Y1                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2024//"<span style="color: #949494;">, </span>"2023//"<span style="color: #949494;">, </span>"2023//"<span style="color: #949494;">, </span>"2023//"<span style="color: #949494;">, </span>"2023//"<span style="color: #949494;">, </span>"2…</span></span>
<span><span class="co">## $ issn              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>"2692-8205 (electronic) and 2692-8205"<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ volume            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>"30"<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span>…</span></span>
<span><span class="co">## $ issue             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>"7"<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">,</span>…</span></span>
<span><span class="co">## $ start_page        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>"6946"<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ end_page          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>"6947"<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ ID                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ XT                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ pubmed_id         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ C1                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ M2                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ proceedings_title <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ C4                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ author            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ year              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ abstract          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ article_id        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ place_published   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span></code></pre>
<p>Nu har vi samlet alle referencer fra ris-filerne i et datasæt, og det
er dette datasæt, vi nu kan konvertere tilbage til en eller flere
ris-filer. Nedenfor giver jeg først et eksempel på, hvordan hele
datasættet kan gemmes, og derefter hvordan data kan splittes op og
gemmes i flere ris-filer. Grunden til at vi nogen gange/ofte ønsker at
dele filerne op er, at disse er lettere at arbejde med, eksempelvis i
<code>AIscreenR</code>, hvor vi for ikke at bruge unødigt mange penge,
gerne deler screeningsprocessen op i chunks af 500, eller fordi
EPPI-Reviewer ofte kun kan indlæse omkring 4000 almindelige referencer
(det afhænger dog af fil-størrelsen).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Gem alle referencer i datasæt i en ris-fil </span></span>
<span><span class="fu">revtools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/revtools/man/write_bibliography.html" class="external-link">write_bibliography</a></span><span class="op">(</span><span class="va">ris_file_dat</span>, filename <span class="op">=</span> <span class="st">"EMBASE_ris_file_1_1000.ris"</span>, format <span class="op">=</span> <span class="st">"ris"</span><span class="op">)</span></span></code></pre></div>
<p>Når man ønsker at splitte data op og gemme flere ris-filer, kan man i
de lette tilfælde gøre dette håndholdt, som følger.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ris_file_1_500</span> <span class="op">&lt;-</span> <span class="va">ris_file_dat</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">500</span>,<span class="op">]</span></span>
<span><span class="va">ris_file_501_1000</span> <span class="op">&lt;-</span> <span class="va">ris_file_dat</span><span class="op">[</span><span class="fl">501</span><span class="op">:</span><span class="fl">1000</span>,<span class="op">]</span></span>
<span></span>
<span><span class="fu">synthesisr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/synthesisr/man/write_refs.html" class="external-link">write_refs</a></span><span class="op">(</span><span class="va">ris_file_1_500</span>, filename <span class="op">=</span> <span class="st">"EMBASE_ris_file_1_500.ris"</span>, format <span class="op">=</span> <span class="st">"ris"</span><span class="op">)</span></span>
<span><span class="fu">synthesisr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/synthesisr/man/write_refs.html" class="external-link">write_refs</a></span><span class="op">(</span><span class="va">ris_file_501_1000</span>, filename <span class="op">=</span> <span class="st">"EMBASE_ris_file_501_1000.ris"</span>, format <span class="op">=</span> <span class="st">"ris"</span><span class="op">)</span></span></code></pre></div>
<p>Det kan dog bare hurtigt ende med at blive trivielt, hvis man
eksempelvis skal dele et datasæt på 100.000 referencer op i blokke af
4000. Det bliver trivielt nok i sig selv at skulle loade disse 25 filer
(100000/4000) til EPPI-reviewer, så for at spare tid, kan man bruge
nedenstående funktion til at gøre gemme-processen hurtigere og mere
effektiv.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gem_ris</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">seq</span>, <span class="va">file_name</span>, <span class="va">data</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="va">start_seq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">seq</span><span class="op">)</span></span>
<span>  <span class="va">end_seq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">seq</span><span class="op">)</span></span>
<span>  <span class="va">name_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">file_name</span>, <span class="st">"_"</span>, <span class="va">start_seq</span> , <span class="st">"_"</span>, <span class="va">end_seq</span>, <span class="st">".ris"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">ris_dat</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">start_seq</span><span class="op">:</span><span class="va">end_seq</span>,<span class="op">]</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu">synthesisr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/synthesisr/man/write_refs.html" class="external-link">write_refs</a></span><span class="op">(</span><span class="va">ris_dat</span>, file <span class="op">=</span> <span class="va">name_file</span>, format <span class="op">=</span> <span class="st">"ris"</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Test at funktionen virker for en delmængde af referencer</span></span>
<span><span class="co">#gem_ris(1:500,  file_name = "EMBASE_ris_file", data = ris_file_dat)</span></span></code></pre></div>
<p>Derefter køres følgende koder</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Her indskriver man inddelingssekvensen (alle delmængder). </span></span>
<span><span class="co"># Kan gøres smartere end dette, men dette vil jeg lade stå for nu. </span></span>
<span><span class="co"># Hjælper gerne med at finde andre løsninger hertil, når der er brug for det. </span></span>
<span><span class="va">list_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">500</span>, <span class="fl">501</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Denne funktion kan godt tage noget tid at køre, så hav endelig tålmodighed</span></span>
<span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">list_obj</span>, <span class="op">~</span> <span class="fu">gem_ris</span><span class="op">(</span><span class="va">.x</span>,  file_name <span class="op">=</span> <span class="st">"EMBASE_ris_file"</span>, data <span class="op">=</span> <span class="va">ris_file_dat</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Vær opmærksom på, at med ovenstående eksempel gemmes ris-filerne i
arbejdssti-mappen. Ønsker man filerne gemt i en undermappe, gøres dette
via file_name argumentet i den konstruerede
<code>gem_ris()</code>-funktion, eksempelvis således</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span></span>
<span>  <span class="va">list_obj</span>, <span class="op">~</span> <span class="fu">gem_ris</span><span class="op">(</span></span>
<span>    <span class="va">.x</span>,  </span>
<span>    file_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/undermappe_til_arbejdssti_1/EMBASE_ris_file"</span><span class="op">)</span>, </span>
<span>    data <span class="op">=</span> <span class="va">ris_file_dat</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mikkel H. Vembye.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
