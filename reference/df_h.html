<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Degrees of freedom calculation for cluster bias correction for standardized mean differences — df_h • VIVECampbell</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Degrees of freedom calculation for cluster bias correction for standardized mean differences — df_h"><meta name="description" content='This function calculates the degrees of freedom for studies
with clustering, using Equation (E.21) from WWC (2022, p. 171). Can also be found
as h in WWC (2021). When df_type = "Pustejovsky", the function calculates the
degrees of freedom, using the upsilon formula from Pustejovsky (2016, find under
the Cluster randomized trials section). See further details below.'><meta property="og:description" content='This function calculates the degrees of freedom for studies
with clustering, using Equation (E.21) from WWC (2022, p. 171). Can also be found
as h in WWC (2021). When df_type = "Pustejovsky", the function calculates the
degrees of freedom, using the upsilon formula from Pustejovsky (2016, find under
the Cluster randomized trials section). See further details below.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">VIVECampbell</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/VIVECampbell.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>VIVE specific content</h6></li>
    <li><a class="dropdown-item" href="../articles/Github.html">Forbind GitHub og RStudio plus adgang til Adobe Pro</a></li>
    <li><a class="dropdown-item" href="../articles/meta-analysis-in-R.html">Kom godt i gang med metaanalyse i R</a></li>
    <li><a class="dropdown-item" href="../articles/openai.html">VIVECampbell OpenAI konto</a></li>
    <li><a class="dropdown-item" href="../articles/samle-flere-ris-filer.html">Samle mange ris-filer til en (eller flere) fil(er) i R</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>EPPI tips and manuals</h6></li>
    <li><a class="dropdown-item" href="../articles/eppi-tips.html">Tips og tricks til EPPI</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Effect size calculation</h6></li>
    <li><a class="dropdown-item" href="../articles/Entering-data.html">Indtastning af data, effektstørrelsesudregning og cluster bias justering, når der kun er clustering i en gruppe</a></li>
    <li><a class="dropdown-item" href="../articles/Pooling-subgroups.html">Pooling across (multiple) subgroups</a></li>
    <li><a class="dropdown-item" href="../articles/ancova-puzzler.html">An ANCOVA puzzler</a></li>
    <li><a class="dropdown-item" href="../articles/es-calc-uden-means-og-sds.html">Effektstørrelsesudregning uden means og SDs (med eksempler)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MikkelVembye/VIVECampbell/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Degrees of freedom calculation for cluster bias correction for standardized mean differences</h1>
      <small class="dont-index">Source: <a href="https://github.com/MikkelVembye/VIVECampbell/blob/main/R/dfs.R" class="external-link"><code>R/dfs.R</code></a></small>
      <div class="d-none name"><code>df_h.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function calculates the degrees of freedom for studies
with clustering, using Equation (E.21) from WWC (2022, p. 171). Can also be found
as h in WWC (2021). When <code>df_type = "Pustejovsky"</code>, the function calculates the
degrees of freedom, using the upsilon formula from Pustejovsky (2016, find under
the Cluster randomized trials section). See further details below.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">df_h</span><span class="op">(</span><span class="va">N_total</span>, <span class="va">ICC</span>, avg_grp_size <span class="op">=</span> <span class="cn">NULL</span>, n_clusters <span class="op">=</span> <span class="cn">NULL</span>, df_type <span class="op">=</span> <span class="st">"WWC"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-n-total">N_total<a class="anchor" aria-label="anchor" href="#arg-n-total"></a></dt>
<dd><p>Numerical value indicating the total sample size of the study.</p></dd>


<dt id="arg-icc">ICC<a class="anchor" aria-label="anchor" href="#arg-icc"></a></dt>
<dd><p>Numerical value indicating the intra-class correlation (ICC) value.</p></dd>


<dt id="arg-avg-grp-size">avg_grp_size<a class="anchor" aria-label="anchor" href="#arg-avg-grp-size"></a></dt>
<dd><p>Numerical value indicating the average cluster size/
the average number of individuals per cluster.</p></dd>


<dt id="arg-n-clusters">n_clusters<a class="anchor" aria-label="anchor" href="#arg-n-clusters"></a></dt>
<dd><p>Numerical value indicating the number of clusters.</p></dd>


<dt id="arg-df-type">df_type<a class="anchor" aria-label="anchor" href="#arg-df-type"></a></dt>
<dd><p>Character indicating how the degrees of freedom are calculated.
Default is <code>"WWC"</code>, which uses WWCs Equation E.21 (2022, p. 171). Alternative is <code>"Pustejovsky"</code>,
which uses the upsilon formula from Pustejovsky (2016).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a numerical value indicating the cluster adjusted degrees of freedom.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>When clustering is present the \(N-2\) degrees of freedom (\(df\)) will be a rather liberal choice,
partly overestimating the small sample corrector \(J\) and partly underestimating
the true variance of (Hedges') \(g_T\). The impact of the calculated \(df\) will be most
consequential for small (sample) studies. To overcome these issues, \(df\)
can instead be calculated in at least to different way. The What Works
Clearinghouse suggests using the following formula</p>
<p>$$ h = \dfrac{[(N-2)-2(n-1)\rho]^2}
{(N-2)(1-\rho)^2 + n(N-2n)\rho^2 + 2(N-2n)\rho(1-\rho)}$$</p>
<p>where \(N\) is the total sample size, \(n\) is average cluster size and
\(\rho\) is the (imputed) intraclass correlation. Alternatively,
Pustejovsky (2016) suggests using the following formula to calculate degrees of freedom
cluster randomized trials</p>
<p>$$ \upsilon = \dfrac{n^2M(M-2)}
{M[(n-1)\rho^2 + 1]^2 + (M-2)(n-1)(1-\rho^2)^2}$$</p>
<p>where \(M\) is the number of cluster which can also be calculated from \(N/n\). <br></p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Read Taylor et al. (2020) to understand why we use the \(g_T\) notation.
Find suggestions for how and which ICC values to impute when these are unknown (Hedges &amp; Hedberg, 2007, 2013).</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Hedges, L. V., &amp; Hedberg, E. C. (2007).
Intraclass correlation values for planning group-randomized trials in education.
<em>Educational Evaluation and Policy Analysis</em>, 29(1), 60–87.
<a href="https://doi.org/10.3102/0162373707299706" class="external-link">doi:10.3102/0162373707299706</a></p>
<p>Hedges, L. V., &amp; Hedberg, E. C. (2013).
Intraclass correlations and covariate outcome correlations for planning
two- and three-Level cluster-randomized experiments in education.
<em>Evaluation Review</em>, 37(6), 445–489. <a href="https://doi.org/10.1177/0193841X14529126" class="external-link">doi:10.1177/0193841X14529126</a></p>
<p>Pustejovsky (2016).
Alternative formulas for the standardized mean difference.
<a href="https://www.jepusto.com/alternative-formulas-for-the-smd/" class="external-link">https://www.jepusto.com/alternative-formulas-for-the-smd/</a></p>
<p>Taylor, J.A., Pigott, T.D., &amp; Williams, R. (2020)
Promoting knowledge accumulation about intervention effects:
Exploring strategies for standardizing statistical approaches and effect size reporting.
<em>Educational Researcher</em>, 51(1), 72-80. <a href="https://doi.org/10.3102/0013189X211051319" class="external-link">doi:10.3102/0013189X211051319</a></p>
<p>What Works Clearinghouse (2021).
Supplement document for Appendix E and the What Works Clearinghouse procedures handbook, version 4.1
<em>Institute of Education Science</em>.
<a href="https://ies.ed.gov/ncee/wwc/Docs/referenceresources/WWC-41-Supplement-508_09212020.pdf" class="external-link">https://ies.ed.gov/ncee/wwc/Docs/referenceresources/WWC-41-Supplement-508_09212020.pdf</a></p>
<p>What Works Clearinghouse (2022).
What Works Clearinghouse Procedures and Standards Handbook, Version 5.0.
<em>Institute of Education Science</em>.
<a href="https://ies.ed.gov/ncee/wwc/Docs/referenceresources/Final_WWC-HandbookVer5_0-0-508.pdf" class="external-link">https://ies.ed.gov/ncee/wwc/Docs/referenceresources/Final_WWC-HandbookVer5_0-0-508.pdf</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">df_h</span><span class="op">(</span>N_total <span class="op">=</span> <span class="fl">100</span>, ICC <span class="op">=</span> <span class="fl">0.1</span>, avg_grp_size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 94.4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">df_h</span><span class="op">(</span>N_total <span class="op">=</span> <span class="fl">100</span>, ICC <span class="op">=</span> <span class="fl">0.1</span>, avg_grp_size <span class="op">=</span> <span class="fl">5</span>, df_type <span class="op">=</span> <span class="st">"Pustejovsky"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 92.29</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mikkel H. Vembye.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

